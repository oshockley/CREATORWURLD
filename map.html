<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>Map - CREATORWURLD</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="grain-overlay"></div>
            <div class="navbar-grid">
                <div class="grid-line grid-v" style="left: 30%"></div>
                <div class="grid-line grid-v" style="left: 70%"></div>
            </div>
            <div class="container">
                <div class="nav-brand">
                    <svg class="logo-globe" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="16" cy="16" r="14" stroke="white" stroke-width="1.5" fill="none"/>
                        <ellipse cx="16" cy="16" rx="5" ry="14" stroke="white" stroke-width="1.5" fill="none"/>
                        <ellipse cx="16" cy="16" rx="14" ry="5" stroke="white" stroke-width="1.5" fill="none"/>
                        <line x1="16" y1="2" x2="16" y2="30" stroke="white" stroke-width="1.5"/>
                        <line x1="2" y1="16" x2="30" y2="16" stroke="white" stroke-width="1.5"/>
                    </svg>
                    <h1><a href="creators.html" class="brand-link">CREATORWURLD</a></h1>
                </div>
                <div class="nav-actions">
                    <button class="menu-toggle" id="menuToggle">
                        <span class="menu-line"></span>
                        <span class="menu-line"></span>
                        <span class="menu-line"></span>
                    </button>
                </div>
            </div>
            <!-- Hidden Menu -->
            <div class="hidden-menu" id="hiddenMenu">
                <ul class="menu-links">
                    <li><a href="creators.html">Creators</a></li>
                    <li><a href="#blog">Blog</a></li>
                    <li><a href="map.html">Map</a></li>
                    <li><a href="board.html">Board</a></li>
                    <li><a href="#underground">Underground</a></li>
                    <li><a href="inbox.html">Inbox</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <!-- Discovery Map Section -->
        <section class="discovery-section" id="discovery">
            <div class="grain-overlay"></div>
            
            <div class="discovery-container">
                <!-- Enhanced Filter Sidebar -->
                <aside class="filter-sidebar">
                    <div class="filter-header">
                        <h3 class="filter-title">DISCOVER</h3>
                        <button class="filter-close" id="filterClose">‚úï</button>
                    </div>
                    
                    <div class="filter-divider"></div>
                    
                    <!-- Role Filters -->
                    <div class="filter-section">
                        <h4 class="filter-section-title">CREATIVE ROLE</h4>
                        <div class="filter-group">
                            <button class="filter-btn active" data-filter="all">
                                <span class="filter-icon">üåê</span>
                                <span>All Creators</span>
                                <span class="filter-count" id="countAll">247</span>
                            </button>
                            <button class="filter-btn" data-filter="videographer">
                                <span class="filter-icon">üìπ</span>
                                <span>Videographer</span>
                                <span class="filter-count" id="countVideo">89</span>
                            </button>
                            <button class="filter-btn" data-filter="producer">
                                <span class="filter-icon">üé¨</span>
                                <span>Producer</span>
                                <span class="filter-count" id="countProducer">64</span>
                            </button>
                            <button class="filter-btn" data-filter="editor">
                                <span class="filter-icon">‚úÇÔ∏è</span>
                                <span>Editor</span>
                                <span class="filter-count" id="countEditor">52</span>
                            </button>
                            <button class="filter-btn" data-filter="photographer">
                                <span class="filter-icon">üì∑</span>
                                <span>Photographer</span>
                                <span class="filter-count" id="countPhoto">42</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="filter-divider"></div>
                    
                    <!-- Distance Filter -->
                    <div class="filter-section">
                        <h4 class="filter-section-title">DISTANCE</h4>
                        <div class="distance-slider-container">
                            <input type="range" id="distanceSlider" min="1" max="50" value="10" class="distance-slider">
                            <div class="distance-display">
                                <span id="distanceValue">10</span> miles
                            </div>
                        </div>
                    </div>
                    
                    <div class="filter-divider"></div>
                    
                    <!-- Availability Filter -->
                    <div class="filter-section">
                        <h4 class="filter-section-title">AVAILABILITY</h4>
                        <label class="filter-checkbox">
                            <input type="checkbox" id="onlineOnly">
                            <span>Online Now</span>
                            <span class="online-dot"></span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" id="availableOnly">
                            <span>Available for Work</span>
                        </label>
                    </div>
                    
                    <div class="filter-divider"></div>
                    
                    <!-- Nearby List -->
                    <div class="area-list">
                        <h3 class="area-title">CLOSEST TO YOU</h3>
                        <div class="area-creators" id="areaCreators">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </aside>
                
                <!-- Map Container -->
                <div class="map-wrapper">
                    <!-- Map Controls -->
                    <div class="map-controls">
                        <button class="map-control-btn near-me-btn" id="nearMeBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="3" fill="currentColor"/>
                                <circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <span>Near Me</span>
                        </button>
                        
                        <button class="map-control-btn" id="heatmapToggle">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"/>
                                <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2"/>
                                <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <span>Heat Map</span>
                        </button>
                        
                        <button class="map-control-btn mobile-filter-toggle" id="mobileFilterToggle">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <line x1="4" x2="20" y1="6" y2="6" stroke="currentColor" stroke-width="2"/>
                                <line x1="4" x2="20" y1="12" y2="12" stroke="currentColor" stroke-width="2"/>
                                <line x1="4" x2="20" y1="18" y2="18" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <span>Filters</span>
                        </button>
                    </div>
                    
                    <!-- Zoom Controls -->
                    <div class="zoom-controls">
                        <button class="zoom-btn" id="zoomIn">+</button>
                        <button class="zoom-btn" id="zoomOut">‚àí</button>
                    </div>
                    
                    <!-- Map Canvas -->
                    <div class="map-container" id="mapContainer">
                        <canvas id="mapCanvas" class="map-canvas"></canvas>
                        <div class="map-markers" id="mapMarkers">
                            <!-- Creator markers will be added dynamically -->
                        </div>
                        
                        <!-- Heatmap overlay (hidden by default) -->
                        <canvas id="heatmapCanvas" class="heatmap-canvas" style="display: none;"></canvas>
                    </div>
                    
                    <!-- Creator Preview Card (shown on hover) -->
                    <div class="creator-preview" id="creatorPreview" style="display: none;">
                        <div class="preview-header">
                            <img class="preview-avatar" id="previewAvatar" src="" alt="">
                            <div class="preview-info">
                                <h4 class="preview-name" id="previewName"></h4>
                                <p class="preview-role" id="previewRole"></p>
                            </div>
                            <div class="preview-status" id="previewStatus"></div>
                        </div>
                        <div class="preview-work" id="previewWork">
                            <img class="preview-work-img" id="previewWorkImg" src="" alt="">
                        </div>
                        <div class="preview-stats">
                            <div class="preview-stat">
                                <span class="stat-value" id="previewDistance"></span>
                                <span class="stat-label">away</span>
                            </div>
                            <div class="preview-stat">
                                <span class="stat-value" id="previewProjects"></span>
                                <span class="stat-label">projects</span>
                            </div>
                            <div class="preview-stat">
                                <span class="stat-value" id="previewRating"></span>
                                <span class="stat-label">rating</span>
                            </div>
                        </div>
                        <button class="preview-connect-btn" id="previewConnect">
                            CONNECT
                        </button>
                    </div>
                    
                    <!-- Cluster Info Popup -->
                    <div class="cluster-popup" id="clusterPopup" style="display: none;">
                        <div class="cluster-popup-header">
                            <span class="cluster-count" id="clusterCount"></span>
                            <span class="cluster-label">creators in this area</span>
                        </div>
                        <button class="cluster-zoom-btn" id="clusterZoomBtn">
                            Zoom In to Explore
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="creators.html" class="nav-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="8" r="3" stroke="currentColor" stroke-width="2"/>
                <path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span>CREATORS</span>
        </a>
        <a href="map.html" class="nav-item active">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span>MAP</span>
        </a>
        <a href="board.html" class="nav-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                <path d="M3 9h18M9 3v18" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span>BOARD</span>
        </a>
        <a href="inbox.html" class="nav-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span>INBOX</span>
        </a>
    </nav>

    <script src="script.js"></script>
    <script src="map.js"></script>
</body>
</html>